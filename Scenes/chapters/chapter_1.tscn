[gd_scene load_steps=17 format=3 uid="uid://btiivx7viv3y6"]

[ext_resource type="Script" uid="uid://brhpmhtu3mrs4" path="res://scripts/chapters/chapter_1.gd" id="1_k2l3u"]
[ext_resource type="PackedScene" uid="uid://c8mx67b8f1vc3" path="res://scenes/maps/locations/island.tscn" id="2_2t2a1"]
[ext_resource type="PackedScene" uid="uid://cf5hru462vhwc" path="res://scenes/characters/npc_island/diver.tscn" id="3_lhans"]
[ext_resource type="PackedScene" uid="uid://4h22a7hemgyb" path="res://scenes/characters/player.tscn" id="4_itjef"]
[ext_resource type="Script" uid="uid://tdyss6nwpwej" path="res://scripts/utils/portal.gd" id="5_k2l3u"]
[ext_resource type="Texture2D" uid="uid://dnhad78k1oqjp" path="res://assets/utils/portal.png" id="6_k2l3u"]
[ext_resource type="Script" uid="uid://dw54htboca3s2" path="res://scripts/utils/paused_menu.gd" id="7_sx3b6"]

[sub_resource type="CircleShape2D" id="CircleShape2D_k2l3u"]
radius = 6.8259025

[sub_resource type="AtlasTexture" id="AtlasTexture_amgoa"]
atlas = ExtResource("6_k2l3u")
region = Rect2(0, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_rgckv"]
atlas = ExtResource("6_k2l3u")
region = Rect2(66, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_kggau"]
atlas = ExtResource("6_k2l3u")
region = Rect2(132, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_ys341"]
atlas = ExtResource("6_k2l3u")
region = Rect2(198, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_it1fp"]
atlas = ExtResource("6_k2l3u")
region = Rect2(264, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_r7de4"]
atlas = ExtResource("6_k2l3u")
region = Rect2(330, 0, 66, 66)

[sub_resource type="AtlasTexture" id="AtlasTexture_wjdj8"]
atlas = ExtResource("6_k2l3u")
region = Rect2(396, 0, 66, 66)

[sub_resource type="SpriteFrames" id="SpriteFrames_cq1mj"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_amgoa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rgckv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kggau")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ys341")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_it1fp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r7de4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wjdj8")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Chapter1" type="Node2D"]
script = ExtResource("1_k2l3u")

[node name="island" parent="." instance=ExtResource("2_2t2a1")]
position = Vector2(1, 0)

[node name="npc_diving" parent="." instance=ExtResource("3_lhans")]
position = Vector2(994, 248)

[node name="Player" parent="." instance=ExtResource("4_itjef")]
position = Vector2(1017, 282)

[node name="Camera2D" type="Camera2D" parent="Player"]
zoom = Vector2(4, 4)
position_smoothing_enabled = true

[node name="Portal" type="Area2D" parent="."]
position = Vector2(1053, 288)
scale = Vector2(0.080000006, 0.080000006)
script = ExtResource("5_k2l3u")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Portal"]
scale = Vector2(25.666666, 25.666666)
shape = SubResource("CircleShape2D_k2l3u")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Portal"]
scale = Vector2(10.333373, 8.666707)
sprite_frames = SubResource("SpriteFrames_cq1mj")
autoplay = "default"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MainMenu" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("7_sx3b6")

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/MainMenu"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 350
theme_override_constants/margin_top = 150
theme_override_constants/margin_right = 350
theme_override_constants/margin_bottom = 150

[node name="Background" type="Panel" parent="CanvasLayer/MainMenu/MarginContainer"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/MainMenu/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 20
alignment = 1

[node name="Title" type="Label" parent="CanvasLayer/MainMenu/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 150
text = "PAUSED"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ResumeButton" type="Button" parent="CanvasLayer/MainMenu/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 60
text = "Resume"

[node name="MainMenuButton" type="Button" parent="CanvasLayer/MainMenu/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
theme_override_font_sizes/font_size = 50
text = "Back to Main Menu"

[connection signal="body_entered" from="Portal" to="Portal" method="_on_body_entered"]
[connection signal="pressed" from="CanvasLayer/MainMenu/MarginContainer/VBoxContainer/ResumeButton" to="CanvasLayer/MainMenu" method="_on_resume_button_pressed"]
[connection signal="pressed" from="CanvasLayer/MainMenu/MarginContainer/VBoxContainer/MainMenuButton" to="CanvasLayer/MainMenu" method="_on_main_menu_button_pressed"]
